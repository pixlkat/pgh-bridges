(this["webpackJsonppgh-bridges"]=this["webpackJsonppgh-bridges"]||[]).push([[0],{38:function(e,t,r){e.exports=r(78)},78:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(3),c=r.n(i),o=r(37),s=r(35),u=r(9),l=r(6),d=r.n(l),g=r(10),_=r(8),f=r(33),m=r.n(f);function p(){return b.apply(this,arguments)}function b(){return(b=Object(g.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"N1wwHtdIjR6Xj1VuTUCSleET1","bridge_reference_number,location_structure_name,feature_carried,feature_intersected,owner_code,length,deck_area,spans,structuretype,year_built,post_status,cond_rate_bridge_deck,cond_rate_bridge_superstructure,cond_rate_bridge_substructure,cond_rate_bridge_culvert,sufficiency_rating,MAX(annual_daily_traffic) AS annual_daily_traffic","bridge_reference_number,location_structure_name,feature_carried,feature_intersected,owner_code,length,deck_area,spans,structuretype,year_built,post_status,cond_rate_bridge_deck,cond_rate_bridge_superstructure,cond_rate_bridge_substructure,cond_rate_bridge_culvert,sufficiency_rating","municipal_code='02/301 - PITTSBURGH'",t="https://data.pa.gov/resource/7fjz-jhc5.json?$select=".concat("bridge_reference_number,location_structure_name,feature_carried,feature_intersected,owner_code,length,deck_area,spans,structuretype,year_built,post_status,cond_rate_bridge_deck,cond_rate_bridge_superstructure,cond_rate_bridge_substructure,cond_rate_bridge_culvert,sufficiency_rating,MAX(annual_daily_traffic) AS annual_daily_traffic","&$where=").concat("municipal_code='02/301 - PITTSBURGH'","&$group=").concat("bridge_reference_number,location_structure_name,feature_carried,feature_intersected,owner_code,length,deck_area,spans,structuretype,year_built,post_status,cond_rate_bridge_deck,cond_rate_bridge_superstructure,cond_rate_bridge_substructure,cond_rate_bridge_culvert,sufficiency_rating","&$order=bridge_reference_number&$$app_token=").concat("N1wwHtdIjR6Xj1VuTUCSleET1"),e.next=7,m.a.get(t);case 7:return r=e.sent,e.abrupt("return",{bridges:r.data,total:r.data.length});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=Object(_.b)({name:"bridges",initialState:{bridgesByRefNumber:{},bridgeIdList:[],isLoading:!1,error:null},reducers:{getBridgesStart:function(e){e.isLoading=!0},getBridgesSuccess:function(e,t){var r=t.payload.bridges;e.isLoading=!1,e.error=null,r.forEach((function(t){e.bridgesByRefNumber[t.bridge_reference_number]=t})),e.bridgeIdList=r.map((function(e){return e.bridge_reference_number}))},getBridgesFailure:function(e,t){e.isLoading=!1,e.error=t.payload}}}),y=h.actions,v=y.getBridgesStart,S=y.getBridgesSuccess,w=y.getBridgesFailure,k=h.reducer,E=(r(64),r(65),r(34)),B=function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")},A=function(e){return{N:"Not applicable","--":"Not applicable",9:"Excellent",8:"Very good",7:"Good, some minor problems noted",6:"Satisfactory, structural elements showing minor deterioration",5:"Fair, primary structural elements are sound but showing minor cracks and signs of deterioration",4:"Poor, deterioration of primary structural elements has advanced 3 = Serious, deterioration has seriously affected the primary structural components",3:"Serious, deterioration has seriously affected the primary structural components",2:"Critical, deterioration of primary structural components has advanced and bridge will be closely monitored, or closed, until corrective action can be taken",1:"Imminent failure, major deterioration in critical structural components. Bridge is closed but corrective action may put the bridge back into light service",0:"Failed, bridge is out of service and beyond corrective action. Superstructure is the underlying or supporting part of a bridge, for example steel members under the deck.",DEMO:"Structure has been demolished"}[e]},j=function(e,t){var r=e.getRow().getData();return'<ul class="list-group">\n      <li class="list-group-item"><strong>Feature Carried:</strong> '.concat(r.feature_carried,'</li>\n      <li class="list-group-item"><strong>Feature Intersected:</strong> ').concat(r.feature_intersected,'</li>\n      <li class="list-group-item"><strong>Structure Type:</strong> ').concat(r.structuretype,'</li>\n      <li class="list-group-item"><strong>Dimensions:</strong>: Length: ').concat(B(r.length)," ft; Spans: ").concat(r.spans,"; Deck Area: ").concat(B(r.deck_area),' sq. ft.</li>\n      <li class="list-group-item"><strong>Condition of structure:</strong>\n      <ul>\n      <li>Deck: ').concat(A(r.cond_rate_bridge_deck),"</li>\n    <li>Superstructure: ").concat(A(r.cond_rate_bridge_superstructure),"</li>\n    <li>Substructure: ").concat(A(r.cond_rate_bridge_substructure),"</li>\n    <li>Culvert: ").concat(A(r.cond_rate_bridge_culvert),"</li>\n    <li>Sufficiency Rating: ").concat(r.sufficiency_rating,'</li> </ul> </li>\n      <li class="list-group-item"><strong>Owner:</strong> ').concat({1:"PennDOT",2:"County Highway Agency",3:"Town or Township Highway Agency ",4:"City, Municipal Highway Agency, Borough",11:"State Park, Forest or Reservation Agency",12:"Local Park, Forest or Reservation Agency",21:"Other State Agencies",25:"Other Local Agencies",26:"Private (other than railroad)",27:"Railroad",31:"State Toll Authority ",32:"Local Toll Authority",60:"Other Federal Agencies",62:"Bureau of Indian Affairs ",64:"U.S. Forest Service 66 National Park Service",68:"Bureau of Land Management",69:"Bureau of Reclamation",70:"Military Reservation Corps of Engineers",80:"Unknown"}[r.owner_code],"</li>\n    </ul>\n</div>")},N=function(e){var t=JSON.parse(JSON.stringify(e.bridges)),r=[{title:"Structure Name",field:"location_structure_name",width:300},{title:"Year Built",field:"year_built",sorter:"number",hozAlign:"center"},{title:"Avg Daily Traffic",field:"annual_daily_traffic",formatter:"money",formatterParams:{precision:0},hozAlign:"center"},{title:"Details",field:"feature_carried",formatter:j,headerSort:!1}];return a.createElement("div",{className:"bridges-table"},a.createElement(E.ReactTabulator,{columns:r,data:t,options:{tooltips:!0,tooltipsHeader:!0,layout:"fitDataFill",height:800,pagination:"local"}}))},T=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.bridges})),r=t.bridgesByRefNumber,i=t.bridgeIdList,c=t.isLoading,o=t.error,s=i.map((function(e){return r[e]}));if(Object(a.useEffect)((function(){e(function(){var e=Object(g.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(v()),e.next=4,p();case 4:r=e.sent,t(S(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(w(e.t0.toString()));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),o)return n.a.createElement("div",null,n.a.createElement("h1",null,"Something went wrong..."),n.a.createElement("div",null,o.toString()));var l=c?n.a.createElement("h3",null,"Loading..."):n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement(N,{bridges:s}));return n.a.createElement("div",{id:"bridge-table"},l)},L=function(){return a.createElement("footer",{className:"footer mt-4 py-3 bg-light"},a.createElement("div",{className:"container"},a.createElement("p",null,"Bridge data extracted from opendataPA ",a.createElement("a",{href:"https://data.pa.gov/Infrastructure-and-Development/State-Bridges-Listing-as-of-July-2018-Transportati/7fjz-jhc5"},"State Bridges Listing as of July 2018"))))},O=function(){return n.a.createElement(s.a,{className:"p-3 d-flex flex-column h-100"},n.a.createElement(o.a,null,n.a.createElement("h1",{className:"header"},"Pittsburgh Bridge Data")),n.a.createElement(T,null),n.a.createElement(L,null))},R=r(5),x=Object(R.c)({bridges:k}),I=Object(_.a)({reducer:x});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(77);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(u.a,{store:I},n.a.createElement(O,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.26aa6cfb.chunk.js.map